<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minnesota Sales Tax Lookup</title>
</head>
<body>
  <h1>MN Sales Tax Lookup by ZIP</h1>
  <input type="text" id="zipInput" placeholder="Enter 5-digit ZIP">
  <button onclick="lookupTaxRate()">Lookup</button>
  <div id="result" style="margin-top:1em;"></div>

  <script>
    let taxData = [];

    fetch('tax-rates.json')
      .then(res => res.json())
      .then(data => taxData = data)
      .catch(err => {
        console.error('Failed to load tax data', err);
        document.getElementById('result').textContent = 'Error loading tax data.';
      });

    function lookupTaxRate() {
      const zip = document.getElementById('zipInput').value.trim();
      const r = document.getElementById('result');
      if (!taxData.length) {
        r.textContent = 'Tax data not yet loadedâ€”please wait.';
        return;
      }
      const match = taxData.find(e => e.zip === zip);
      if (match) {
        r.innerHTML = `
          <strong>${match.city}, ${match.county} County</strong><br>
          Combined Sales Tax Rate: ${match.combined_rate.toFixed(3)}%
        `;
      } else {
        r.textContent = `No data found for ZIP code ${zip}.`;
      }
    }
  </script>
</body>
</html>

